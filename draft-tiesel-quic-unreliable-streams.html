<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Considerations for Unreliable Streams in QUIC</title>

  
<style type="text/css">/*<![CDATA[*/
@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}

@media screen and (min-width: 1024px) {
  ul.toc, #rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 525px);
    width: 300px;
    z-index: 1;
  }
  #rfc\.toc {
    top: 15px;
  }
  ul.toc {
    top: 80px;
    overflow: auto;
  }

  body {
    padding-right: 350px;
  }
}

body {
  font: 15px "Helvetica Neue",Helvetica,Arial,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 130%;
  margin: 25px auto;
  max-width: 724px;
}

.title, .filename, h1, h2, h3, h4 {
  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size-adjust: 0.5;
  font-weight: 500;
  color: #333;
  line-height: 100%;
  margin: 0.8em 0 0.3em;
}
.title { font-size: 36px; }
h1 { font-size: 30px; }
h2 { font-size: 24px; }
h3, h4 { font-size: 18px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

ul.toc li {
  list-style: none;
  text-indent: -2.5em;
  padding-left: 2.5em;
  padding-bottom: 5px;
  margin: 0;
}
ul.toc ul {
  margin: 0;
}
/* xml2rfc nests ul directly inside ul which messes with the style badly */
ul.toc, ul.toc>ul, ul.toc ul>ul {
  margin: 0 0 0 1.5em;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header {
  width: 100%;
}
table.header td {
  border: none;
  background-color: transparent;
  color: black;
}
.filename {
  color: rgb(119, 119, 119);
  font-size: 23px;
  font-weight: normal;
  height: auto;
  line-height: 100%;
}
#rfc\.abstract+p {
  font-size: 20px;
  font-weight: 300;
  line-height: 130%;
}

samp, tt, code, pre {
  font: 11pt consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure {
  font-style: italic;
  margin: 0 1.5em;
}

address {
  margin: 10px 0 0;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn {
  font-weight: bold;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

ol, ul, li, p {
  padding: 0;
  margin: 0.5em 0 0.5em 2em;
}
li, p {
  margin-left: 0;
}
address {
  font-style: normal;
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
/*]]>*/</style>


  <link href="#rfc.toc" rel="Contents"/>
<link href="#rfc.section.1" rel="Chapter" title="1 Conventions and Definitions"/>
<link href="#rfc.section.2" rel="Chapter" title="2 Introduction"/>
<link href="#rfc.section.3" rel="Chapter" title="3 Connection Level Considerations"/>
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Unreliable Stream Support Negotiation"/>
<link href="#rfc.section.4" rel="Chapter" title="4 Stream Level Considerations"/>
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Stream Open"/>
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Stream Close"/>
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Stream as a message"/>
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Stream ID 0x0"/>
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 Congestion Control on Unreliable Streams"/>
<link href="#rfc.section.4.6" rel="Chapter" title="4.6 Flow Control on Unreliable Streams"/>
<link href="#rfc.section.5" rel="Chapter" title="5 Application Interface Considerations"/>
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Retransmissions within Unreliable Streams"/>
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Presentation of Unreliable Streams"/>
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Prioritization of Unreliable Streams"/>
<link href="#rfc.section.6" rel="Chapter" title="6 Implemenation Proposal"/>
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Stream Identifiers"/>
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Stream Close"/>
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations"/>
<link href="#rfc.section.8" rel="Chapter" title="8 IANA Considerations"/>
<link href="#rfc.section.9" rel="Chapter" title="9 Acknowledgements"/>
<link href="#rfc.references" rel="Chapter" title="10 Informative References"/>
<link href="#rfc.authors" rel="Chapter"/>


  <meta name="generator" content="xml2rfc version 2.5.2 - http://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Tiesel, P., Palmer, M., Chandrasekaran, B., Feldmann, A., and J. Ott" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-tiesel-quic-unreliable-streams-latest" />
  <meta name="dct.issued" scheme="ISO8601" content="2017-10-24" />
  <meta name="dct.abstract" content="This memo outlines unreliable stream support for QUIC.  It contains a collection of considerations and requirements for unreliable streams in QUIC.  It provides three alternatives demonstrating how unreliable streams can be realized.  The intention of this document is to collect considerations regarding unreliable streams in QUIC and to frame the design space and give an example how unreliable stream support could be realized." />
  <meta name="description" content="This memo outlines unreliable stream support for QUIC.  It contains a collection of considerations and requirements for unreliable streams in QUIC.  It provides three alternatives demonstrating how unreliable streams can be realized.  The intention of this document is to collect considerations regarding unreliable streams in QUIC and to frame the design space and give an example how unreliable stream support could be realized." />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
  <td class="left">QUIC Working Group</td>
  <td class="right">P. Tiesel</td>
</tr>
<tr>
  <td class="left">Internet-Draft</td>
  <td class="right">M. Palmer</td>
</tr>
<tr>
  <td class="left">Intended status: Informational</td>
  <td class="right">B. Chandrasekaran</td>
</tr>
<tr>
  <td class="left">Expires: April 27, 2018</td>
  <td class="right">A. Feldmann</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">TU Berlin</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">J. Ott</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">TU Munich</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">October 24, 2017</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Considerations for Unreliable Streams in QUIC<br />
  <span class="filename">draft-tiesel-quic-unreliable-streams-latest</span></p>
  
  <h1 id="rfc.abstract">
  <a href="#rfc.abstract">Abstract</a>
</h1>
<p>This memo outlines unreliable stream support for QUIC.  It contains a collection of considerations and requirements for unreliable streams in QUIC.  It provides three alternatives demonstrating how unreliable streams can be realized.  The intention of this document is to collect considerations regarding unreliable streams in QUIC and to frame the design space and give an example how unreliable stream support could be realized.</p>
<h1 id="rfc.status">
  <a href="#rfc.status">Status of This Memo</a>
</h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 27, 2018.</p>
<h1 id="rfc.copyrightnotice">
  <a href="#rfc.copyrightnotice">Copyright Notice</a>
</h1>
<p>Copyright (c) 2017 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Conventions and Definitions</a></li>
<li>2.   <a href="#rfc.section.2">Introduction</a></li>
<li>3.   <a href="#rfc.section.3">Connection Level Considerations</a></li>
<ul><li>3.1.   <a href="#rfc.section.3.1">Unreliable Stream Support Negotiation</a></li>
</ul><li>4.   <a href="#rfc.section.4">Stream Level Considerations</a></li>
<ul><li>4.1.   <a href="#rfc.section.4.1">Stream Open</a></li>
<li>4.2.   <a href="#rfc.section.4.2">Stream Close</a></li>
<li>4.3.   <a href="#rfc.section.4.3">Stream as a message</a></li>
<li>4.4.   <a href="#rfc.section.4.4">Stream ID 0x0</a></li>
<li>4.5.   <a href="#rfc.section.4.5">Congestion Control on Unreliable Streams</a></li>
<li>4.6.   <a href="#rfc.section.4.6">Flow Control on Unreliable Streams</a></li>
</ul><li>5.   <a href="#rfc.section.5">Application Interface Considerations</a></li>
<ul><li>5.1.   <a href="#rfc.section.5.1">Retransmissions within Unreliable Streams</a></li>
<li>5.2.   <a href="#rfc.section.5.2">Presentation of Unreliable Streams</a></li>
<li>5.3.   <a href="#rfc.section.5.3">Prioritization of Unreliable Streams</a></li>
</ul><li>6.   <a href="#rfc.section.6">Implemenation Proposal</a></li>
<ul><li>6.1.   <a href="#rfc.section.6.1">Stream Identifiers</a></li>
<li>6.2.   <a href="#rfc.section.6.2">Stream Close</a></li>
</ul><li>7.   <a href="#rfc.section.7">Security Considerations</a></li>
<li>8.   <a href="#rfc.section.8">IANA Considerations</a></li>
<li>9.   <a href="#rfc.section.9">Acknowledgements</a></li>
<li>10.   <a href="#rfc.references">Informative References</a></li>
<li><a href="#rfc.authors">Authors' Addresses</a></li>


  </ul>

  <h1 id="rfc.section.1"><a href="#rfc.section.1">1.</a> <a href="#conventions-and-definitions" id="conventions-and-definitions">Conventions and Definitions</a></h1>
<p id="rfc.section.1.p.1">The words &#8220;MUST&#8221;, &#8220;MUST NOT&#8221;, &#8220;SHALL&#8221;, &#8220;SHALL NOT&#8221;, &#8220;SHOULD&#8221;, and &#8220;MAY&#8221; are used in this document. It&#8217;s not shouting; when these words are capitalized, they have a special meaning as defined in <a href="#RFC2119">[RFC2119]</a>.</p>
<h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a> <a href="#intro" id="intro">Introduction</a></h1>
<p id="rfc.section.2.p.1">There are many use cases for unreliable delivery of stream data, e.g., to meet deadlines for data delivery in the presence of short time congestion by avoiding head of line blocking.  Still, some control data or metadata often needs to be transmitted reliably.</p>
<p id="rfc.section.2.p.2">This memo describes how QUIC can provide reliable and unreliable transmission within the same connection.  This model allows applications to request reliable or unreliable transmission in QUIC on a per stream level.  For an unreliable stream, the QUIC implementation can decide which frames to retransmit.  Thus, it is possible to implement a mix of reliable and unreliable transmission within the same stream.</p>
<p id="rfc.section.2.p.3">This draft is based on <a href="#I-D.draft-ietf-quic-transport-07">[I-D.draft-ietf-quic-transport-07]</a> with the addition of uni-directional streams (https://github.com/quicwg/base-drafts/pull/872) and variable length integer encoding (https://github.com/quicwg/base-drafts/pull/877) All content of this memo is supposed to be merged into <a href="#I-D.draft-ietf-quic-transport-07">[I-D.draft-ietf-quic-transport-07]</a>, <a href="#I-D.draft-ietf-quic-recovery-06">[I-D.draft-ietf-quic-recovery-06]</a> and, <a href="#I-D.draft-ietf-quic-applicability-00">[I-D.draft-ietf-quic-applicability-00]</a> once unreliable streams get integrated with QUIC.</p>
<h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a> <a href="#connection-level-considerations" id="connection-level-considerations">Connection Level Considerations</a></h1>
<h1 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a> <a href="#unreliable-stream-support-negotiation" id="unreliable-stream-support-negotiation">Unreliable Stream Support Negotiation</a></h1>
<p id="rfc.section.3.1.p.1">Support of unreliable streams should be optional to reduce the complexity of a minimal QUIC implementation.  An endpoint signals its willingness to receiving unreliable stream frames during the TLS handshake using the transport parameter allow_unreliable_streams in analogy to the omit_connection_id flag specified in <a href="#I-D.draft-ietf-quic-transport-07">[I-D.draft-ietf-quic-transport-07]</a>.  An application that makes no use of partial delivery of stream data, should not signal willingness to allow unreliable streams.</p>
<h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a> <a href="#stream-level-considerations" id="stream-level-considerations">Stream Level Considerations</a></h1>
<h1 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1.</a> <a href="#stream-open" id="stream-open">Stream Open</a></h1>
<p id="rfc.section.4.1.p.1">For each stream, the receiver must be able to know whether he can rely on the sender retransmitting lost stream data.  Therefore, an endpoint opening an unreliable stream MUST indicate the fact that for a particular stream lost stream data might not be retransmitted.  The indication must either be carried on each frame that could be received first by an endpoint or it must be transmitted reliable and acknowledged before the first frame of an unreliable stream is sent.</p>
<p id="rfc.section.4.1.p.2">We anticipate two options how to indicate whether a stream is unreliable:</p>
<p/>

<ul>
  <li>Indicate unreliable streams in the stream frame header.</li>
  <li>Leave the signaling of unreliable streams completely to the application layer.</li>
</ul>
<p id="rfc.section.4.1.p.4">The authors advocate for explicitly signaling unreliable streams in the stream frame header.  This approach does not introduce additional interwinding between QUIC and the application.  It also reduces the complexity of applications where only some streams should be transmitted unreliably.  See <a href="#str_ind">Section 6</a> for a proposal how to change the stream frame header when a an endpoint has signaled the willingness to allow unreliable streams.</p>
<h1 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2.</a> <a href="#stream_close" id="stream_close">Stream Close</a></h1>
<p id="rfc.section.4.2.p.1">As frames of unreliable streams may not be retransmitted, the loss of a frame indicating the end of a stream may introduce a zombie stream state.  A QUIC version with unreliable stream support MUST make sure that either such a zombie state does not occur or include a mechanism to clean up zombie streams, e.g. by using a window of active unreliable stream ids.</p>
<p id="rfc.section.4.2.p.2">The authors advocate for solving this issue by reliable transmitting the final offset for all stream that consist of more than a single stream frame.  The retransmit of the stream end can be achieved by sending an empty stream frame with the final offset and the FIN bit sent or by using a RST_STREAM frame.</p>
<p id="rfc.section.4.2.p.3">The last requirement can be relaxed for unidirectional streams that only consist of a single stream frame &#8211; See <a href="#stream_msg">Section 4.3</a> for details.</p>
<h1 id="rfc.section.4.3"><a href="#rfc.section.4.3">4.3.</a> <a href="#stream_msg" id="stream_msg">Stream as a message</a></h1>
<p id="rfc.section.4.3.p.1">Unreliable streams are particularly useful if QUIC streams are used as a message abstraction.  If the messages can be sent using a single stream frame on an unidirectional stream, the state committed at the sender- and receiver side can be minimized and signaling of stream close can be omitted.  The loss of such a frame does not introduce state at the perceived receiver, nor does it require the sender to keep state for retransmission.</p>
<h1 id="rfc.section.4.4"><a href="#rfc.section.4.4">4.4.</a> <a href="#stream-id-0x0" id="stream-id-0x0">Stream ID 0x0</a></h1>
<p id="rfc.section.4.4.p.1">Data of stream 0x0 MUST be transmitted reliably as TLS expects reliable transmission.</p>
<h1 id="rfc.section.4.5"><a href="#rfc.section.4.5">4.5.</a> <a href="#congestion-control-on-unreliable-streams" id="congestion-control-on-unreliable-streams">Congestion Control on Unreliable Streams</a></h1>
<p id="rfc.section.4.5.p.1">Unreliable streams are subject to regular congestion control.</p>
<p id="rfc.section.4.5.p.2">It should be clarified that ACK and RST_STREAM Frames are not subject to congestion control.</p>
<h1 id="rfc.section.4.6"><a href="#rfc.section.4.6">4.6.</a> <a href="#flow-control-on-unreliable-streams" id="flow-control-on-unreliable-streams">Flow Control on Unreliable Streams</a></h1>
<p id="rfc.section.4.6.p.1">Unreliable streams are subject to regular flow control on connection and stream level.</p>
<h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a> <a href="#application-interface-considerations" id="application-interface-considerations">Application Interface Considerations</a></h1>
<h1 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1.</a> <a href="#retransmissions-within-unreliable-streams" id="retransmissions-within-unreliable-streams">Retransmissions within Unreliable Streams</a></h1>
<p id="rfc.section.5.1.p.1">While unreliable streams suggest just disabling retransmissions for these streams, applications my choose to apply arbitrary retransmission strategies for unreliable streams, e.g., retransmit stream data as long it will likely be delivered on-time with respect to an application provided deadline or only retransmit certain byte ranges.</p>
<p id="rfc.section.5.1.p.2">A QUIC implementation that implements retransmissions on a per-packet basis, therefore, may retransmit unreliable stream data even if not requested by the application.</p>
<h1 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2.</a> <a href="#presentation-of-unreliable-streams" id="presentation-of-unreliable-streams">Presentation of Unreliable Streams</a></h1>
<p id="rfc.section.5.2.p.1">The presentation of unreliable streams is application specific.</p>
<p id="rfc.section.5.2.p.2">The anticipated use cases include:</p>
<p/>

<ul>
  <li>Data being delivered annotated with its offset as it is received.</li>
  <li>Data being delivered after a deadline, e.g., with an annotated list of holes and byte ranges of lost data filled with zeros.</li>
  <li>Data being delivered as concatenation of the stream fragments received.  This can be useful if the application&#8217;s framing is aligned with the QUIC stream frames.</li>
</ul>
<h1 id="rfc.section.5.3"><a href="#rfc.section.5.3">5.3.</a> <a href="#prioritization-of-unreliable-streams" id="prioritization-of-unreliable-streams">Prioritization of Unreliable Streams</a></h1>
<p id="rfc.section.5.3.p.1">Prioritization of Unreliable streams uses the same priority mechanism as reliable streams.</p>
<p id="rfc.section.5.3.p.2">Applications that want UDP-like behavior and thus wand to avoid data sent over unreliable streams queued in send buffers  must make sure that:</p>
<p/>

<ul>
  <li>The flow control windows are large enough to send at any given point in time</li>
  <li>The data rate sent in all frames stays below the one permitted by the congestion window.</li>
  <li>The priority of unreliable streams is high enough to transmit data, even if there are retransmissions outstanding on other streams.</li>
</ul>
<p id="rfc.section.5.3.p.4">To enable writing portable applications, guidelines how prioritization should be handled in a QUIC implementation and how it is exposed to the application are required.</p>
<h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a> <a href="#str_ind" id="str_ind">Implemenation Proposal</a></h1>
<p id="rfc.section.6.p.1">This proposal realizes unreliable streams by modifying <a href="#I-D.draft-ietf-quic-transport-07">[I-D.draft-ietf-quic-transport-07]</a> with the addition of uni-directional streams (https://github.com/quicwg/base-drafts/pull/872) and variable length integer encoding (https://github.com/quicwg/base-drafts/pull/877) to support unreliable streams.  It modifies the Stream ID to signal whether a stream is reliable in analogy to the way unidirectional streams are signaled.  In addition, it addresses the Stream Close concerns raised in <a href="#stream_close">Section 4.2</a>.</p>
<h1 id="rfc.section.6.1"><a href="#rfc.section.6.1">6.1.</a> <a href="#stream-id" id="stream-id">Stream Identifiers</a></h1>
<p id="rfc.section.6.1.p.1">Streams are identified by an variable-length integer, referred to as the Stream ID.  The least significant three bits of the Stream ID are used to identify the type of stream (unidirectional or bidirectional),  (unreliable or reliable) and the initiator of the stream.</p>
<p id="rfc.section.6.1.p.2">The second least significant bit (0x2) of the Stream ID differentiates between unidirectional streams and bidirectional streams.  Unidirectional streams always have this bit set to 1 and bidirectional streams have this bit set to 0.</p>
<p id="rfc.section.6.1.p.3">The third least significant bit (0x4) of the Stream ID differentiates between unreliable and reliable streams.  Unreliable streams always have this bit set to 1 and reliable streams have this bit set to 0.</p>
<p id="rfc.section.6.1.p.4">The three type bits from a Stream ID therefore identify streams as summarized in <a href="#stream-id-types">Section 6.2</a>.</p>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <thead>
    <tr>
      <th class="left">Low Bits</th>
      <th class="left">Stream Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="left">0x0</td>
      <td class="left">Client-Initiated, Bidirectional , Reliable</td>
    </tr>
    <tr>
      <td class="left">0x1</td>
      <td class="left">Server-Initiated, Bidirectional , Reliable</td>
    </tr>
    <tr>
      <td class="left">0x2</td>
      <td class="left">Client-Initiated, Unidirectional, Reliable</td>
    </tr>
    <tr>
      <td class="left">0x3</td>
      <td class="left">Server-Initiated, Unidirectional, Reliable</td>
    </tr>
    <tr>
      <td class="left">0x4</td>
      <td class="left">Client-Initiated, Bidirectional , Unreliable</td>
    </tr>
    <tr>
      <td class="left">0x5</td>
      <td class="left">Server-Initiated, Bidirectional , Unreliable</td>
    </tr>
    <tr>
      <td class="left">0x6</td>
      <td class="left">Client-Initiated, Unidirectional, Unreliable</td>
    </tr>
    <tr>
      <td class="left">0x7</td>
      <td class="left">Server-Initiated, Unidirectional, Unreliable</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.section.6.2"><a href="#rfc.section.6.2">6.2.</a> <a href="#stream-id-types" id="stream-id-types">Stream Close</a></h1>
<p id="rfc.section.6.2.p.1">Streams MUST be explicitly closed. This can either be done by setting the FIN bit on the frame carrying the final offset of the stream or by using a RST_STREAM frame indicating the final offset.</p>
<p id="rfc.section.6.2.p.2">For unreliable stream transmitted using more than one stream frame,  the stream close has to be transmitted reliably to prevent zombie stream state.  If the package containing the FIN flagged stream frame is lost, and the data in this stream is not to be retransmitted, the sender can (re-)transmit the stream close by sending an empty FIN flagged stream frame carrying the final offset.</p>
<h1 id="rfc.section.7"><a href="#rfc.section.7">7.</a> <a href="#sec" id="sec">Security Considerations</a></h1>
<p id="rfc.section.7.p.1">Unreliable Streams open a few additional risks of information disclosure.</p>
<p/>

<ul>
  <li>An active, on path attacker can drop selected frames and see whether the transmission timings change to see whether unreliable streams are used.</li>
  <li>Using streams as a message as described in {#stream_msg} will most likely result in a PDUs that resemble the packet size of the messages.  If not mitigated, this can disclose individual message length.</li>
</ul>
<h1 id="rfc.section.8"><a href="#rfc.section.8">8.</a> <a href="#iana" id="iana">IANA Considerations</a></h1>
<p id="rfc.section.8.p.1">TBD</p>
<h1 id="rfc.section.9"><a href="#rfc.section.9">9.</a> <a href="#acknowledgements" id="acknowledgements">Acknowledgements</a></h1>
<p id="rfc.section.9.p.1">This work has been supported by Leibniz Prize project funds of DFG - German Research Foundation: Gottfried Wilhelm Leibniz-Preis 2011 (FKZ FE 570/4-1) and received funding from the European Union&#8217;s Horizon 2020 research and innovation programme 2014-2018 under grant agreement No. 644866, Scalable and Secure Infrastructures for Cloud Operations (SSICLOPS).</p>
<h1 id="rfc.references"><a href="#rfc.references">10.</a> Informative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="I-D.draft-ietf-quic-applicability-00">[I-D.draft-ietf-quic-applicability-00]</b>
      </td>
      <td class="top"><a>Kuehlewind, M.</a> and <a>B. Trammell</a>, "<a href="http://tools.ietf.org/html/draft-ietf-quic-applicability-00">Applicability of the QUIC Transport Protocol</a>", Internet-Draft draft-ietf-quic-applicability-00, July 2017.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.draft-ietf-quic-recovery-06">[I-D.draft-ietf-quic-recovery-06]</b>
      </td>
      <td class="top"><a>Iyengar, J.</a> and <a>I. Swett</a>, "<a href="http://tools.ietf.org/html/draft-ietf-quic-recovery-06">QUIC Loss Detection and Congestion Control</a>", Internet-Draft draft-ietf-quic-recovery-06, September 2017.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.draft-ietf-quic-transport-07">[I-D.draft-ietf-quic-transport-07]</b>
      </td>
      <td class="top"><a>Iyengar, J.</a> and <a>M. Thomson</a>, "<a href="http://tools.ietf.org/html/draft-ietf-quic-transport-07">QUIC: A UDP-Based Multiplexed and Secure Transport</a>", Internet-Draft draft-ietf-quic-transport-07, October 2017.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC2119">[RFC2119]</b>
      </td>
      <td class="top"><a>Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.authors">
  <a href="#rfc.authors">Authors' Addresses</a>
</h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Philipp S. Tiesel</span> 
	  <span class="n hidden">
		<span class="family-name">Tiesel</span>
	  </span>
	</span>
	<span class="org vcardline">TU Berlin</span>
	<span class="adr">
	  <span class="vcardline">Marchstr. 23</span>

	  <span class="vcardline">
		<span class="locality">Berlin</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:philipp@inet.tu-berlin.de">philipp@inet.tu-berlin.de</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Mirko Palmer</span> 
	  <span class="n hidden">
		<span class="family-name">Palmer</span>
	  </span>
	</span>
	<span class="org vcardline">TU Berlin</span>
	<span class="adr">
	  <span class="vcardline">Marchstr. 23</span>

	  <span class="vcardline">
		<span class="locality">Berlin</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:mirko@inet.tu-berlin.de">mirko@inet.tu-berlin.de</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Balakrishnan Chandrasekaran</span> 
	  <span class="n hidden">
		<span class="family-name">Chandrasekaran</span>
	  </span>
	</span>
	<span class="org vcardline">TU Berlin</span>
	<span class="adr">
	  <span class="vcardline">Marchstr. 23</span>

	  <span class="vcardline">
		<span class="locality">Berlin</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:balac@inet.tu-berlin.de">balac@inet.tu-berlin.de</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Anja Feldmann</span> 
	  <span class="n hidden">
		<span class="family-name">Feldmann</span>
	  </span>
	</span>
	<span class="org vcardline">TU Berlin</span>
	<span class="adr">
	  <span class="vcardline">Marchstr. 23</span>

	  <span class="vcardline">
		<span class="locality">Berlin</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:anja@inet.tu-berlin.de">anja@inet.tu-berlin.de</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Joerg Ott</span> 
	  <span class="n hidden">
		<span class="family-name">Ott</span>
	  </span>
	</span>
	<span class="org vcardline">TU Munich</span>
	<span class="adr">
	  <span class="vcardline">Boltzmannstra&#223;e 3</span>

	  <span class="vcardline">
		<span class="locality">Garching bei M&#252;nchen</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:ott@in.tum.de">ott@in.tum.de</a></span>

  </address>
</div>

</body>
</html>
